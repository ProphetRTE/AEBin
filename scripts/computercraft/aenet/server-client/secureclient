local aeNet = require("lib/aenet")
-- aeNet.setLoggingEnabled(false)

function onStart()
  -- Connect to the server
  local socket = aeNet.connect("LoginDemoServer")
  -- Log in with a username and password
  aeNet.login(socket, "Bobby", "mypass123")
end

function onEvent(event)
  -- Logged in successfully
  if event[1] == "login" then
    -- The username logged in
    local username = event[2]
    -- The socket that was logged in
    local socket = event[3]
    print("Logged in as "..username)
    aeNet.send(socket, "Hello server!")
  -- Login failed (wrong username or password)
  elseif event[1] == "login_failed" then
    print("Didn't manage to log in. :(")
  elseif event[1] == "encrypted_message" then
    print("Server said: "..event[2])
  end
end

aeNet.startEventLoop(onStart, onEvent)